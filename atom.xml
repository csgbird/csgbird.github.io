<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>csgbird博客</title>
  <subtitle>新手程序员</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-11-24T00:37:18.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>csgbird</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>HBase伪分布式搭建</title>
    <link href="http://yoursite.com/2016/11/24/HBase%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/HBase%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA/"/>
    <id>http://yoursite.com/2016/11/24/HBase伪分布式搭建/HBase伪分布式搭建/</id>
    <published>2016-11-24T00:45:46.117Z</published>
    <updated>2016-11-24T00:37:18.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="HBase伪分布式搭建"><a href="#HBase伪分布式搭建" class="headerlink" title="HBase伪分布式搭建"></a>HBase伪分布式搭建</h1><p>@(csg)[bigdata, HBase, Hadoop,Linux]</p>
<p>[TOC]</p>
<p>运行环境：centos7 64位<br>vm虚拟机<br>参考地址：<a href="http://www.jikexueyuan.com/course/2089_3.html?ss=1" target="_blank" rel="external">http://www.jikexueyuan.com/course/2089_3.html?ss=1</a></p>
<p>##1、关闭防火墙和SELinux</p>
<p>###1.1.1防火墙关闭<br>centos7以下的6版本都是采用iptables进行防火墙设置，centos从7开始默认用的是firewalld，这个是基于iptables的，虽然有iptables的核心，但是iptables的服务是没安装的。所以你只要停止firewalld服务即可： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo systemctl stop firewalld.service &amp;&amp; sudo systemctl disable firewalld.service</div></pre></td></tr></table></figure>
<p>或者（这是我采用的方法）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service firewalld stop</div></pre></td></tr></table></figure>
<p>不过上面这一条只是临时关闭防火墙，所以还的加一条：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chkconfig firewalld off</div></pre></td></tr></table></figure>
<p>如果你要改用iptables的话，需要安装iptables服务： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo yum install iptables-services </div><div class="line">sudo systemctl enable iptables &amp;&amp; sudo systemctl enable ip6tables </div><div class="line">sudo systemctl start iptables &amp;&amp; sudo systemctl start ip6tables</div></pre></td></tr></table></figure>
<p>###1.1.2SELinux的关闭<br>只需要改变一个文件夹内容即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/sysconfig/selinux</div></pre></td></tr></table></figure>
<p>修改文件中的selinux为disabled即可<br><img src="./1479823243416.png" alt="Alt text"></p>
<p>##2、配置IP、DNS<br>这里ip我暂时还未配置，只是让ip地址能够成功上网就行<br>具体为<br>首先虚拟机与主机的链接方式为NAT<br><img src="./1479865806710.png" alt="Alt text"><br>修改一个配置文件，<br><img src="./1479865726599.png" alt="Alt text"><br><img src="./1479865950243.png" alt="Alt text"></p>
<p><strong><em> 将最后一行的ONBOOT=no改为ONBOOT=yes,如图<br>最后输入:wq 保存并退出，再重启一下network： </em></strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service network restart</div></pre></td></tr></table></figure>
<p>测试：<br><img src="./1479865989095.png" alt="Alt text"><br>就能上网了</p>
<p>##3、配置主机名<br>这里我也没配置，一直用ip地址来表示主机</p>
<p>##4、设置SSH免密码登录<br>生成秘钥：输入ssh-keygen -t rsa，然后输入四个回车<br><img src="./1479866320592.png" alt="Alt text"><br>拷贝秘钥：<br><img src="./1479866471036.png" alt="Alt text"></p>
<p>##5、安装JDK<br>新建文件夹—&gt;然后拷贝jdk的安装解压包到该路径下,解压,改名字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mkdir  /usr/jvm</div><div class="line">cp ../jdk-7u25-linux-x64.tar.gz    /usr/jvm</div><div class="line">cd /usr/jvm</div><div class="line">tar -zxvf jdk-7u25-linux-x64.tar.gz</div><div class="line">mv jdk1.7.25 jdk7</div></pre></td></tr></table></figure>
<p>更改环境变量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/profile</div></pre></td></tr></table></figure></p>
<p>在尾部添加环境变量配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">JAVA_HOME=/usr/jvm/jdk7</div><div class="line">JRE_HOME=/usr/java/jdk7/jre</div><div class="line">CLASS_PATH=.:$JRE_HOME/lib:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</div><div class="line">PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</div><div class="line">export JAVA_HOME JRE_HOME CLASS_PATH PATH</div></pre></td></tr></table></figure>
<p>查看版本</p>
<blockquote>
<p>java -version</p>
</blockquote>
<p><img src="./1479863068190.png" alt="Alt text"></p>
<blockquote>
<p>可以发现原本的open-jdk仍然占据主导地位,此时java -version的时候还会发现java版本还是 OpenJDK。这个时候进入/usr/bin目录  查找java  javac 可以发现，这两个符号链接指向系统默认的jdk目录。删除java javac并且把新的java命令放在其中</p>
</blockquote>
<p>具体操作如下：<br><img src="./1479863536751.png" alt="Alt text"><br>这下可以发现新的jdk已经代替了原来的</p>
<p>##6、Hadoop环境搭建</p>
<p>###6.6.1、下载编译<br>我是把个大数据的软件都放在一起的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mkdir /usr/local/bigdata</div><div class="line">cd /usr/local/bigdata</div><div class="line">mkdir tools</div><div class="line">mkdir software</div></pre></td></tr></table></figure></p>
<p>tools文件夹下放入的是软件压缩包<br>software中是存放的个软件<br>上传hadoop的压缩包<br>具体下载地址为：<a href="http://www.apache.org/dyn/closer.cgi/hadoop/common" target="_blank" rel="external">http://www.apache.org/dyn/closer.cgi/hadoop/common</a><br>上传到tools文件夹下，解压(注意此处-C是大写的)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxf hadoop-2.7.2.tar.gz -C ../software/</div></pre></td></tr></table></figure>
<p>###6.6.2、配置HDFS、YARN<br>总共配置了如下5个文件<br><img src="./1479886023478.png" alt="Alt text"></p>
<p>####6.6.2.1配置HDFS<br>然后采用noteapp++的插件nppftp对linux中的文件进行修改<br>插件下载位置：<a href="https://sourceforge.net/projects/nppftp/?source=typ_redirect" target="_blank" rel="external">https://sourceforge.net/projects/nppftp/?source=typ_redirect</a><br>然后放入noteapp下的plugins文件夹下<br><img src="./1479870868947.png" alt="Alt text"></p>
<ul>
<li>重启noteapp++:<br><img src="./1479870893274.png" alt="Alt text"></li>
<li>配置ftp：<br><img src="./1479871660459.png" alt="Alt text"><br>链接后，这样就能看到链接的linux结构目录</li>
<li>查看官方文档开始配置：<a href="http://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-common/SingleCluster.html" target="_blank" rel="external">http://hadoop.apache.org/docs/r2.7.3/hadoop-project-dist/hadoop-common/SingleCluster.html</a><br>首先进入hadoop2.7.2/etc/hadoop目录下发现以下文件夹</li>
</ul>
<ul>
<li><p>配置hadoop-env.sh<br><img src="./1479873700714.png" alt="Alt text"></p>
</li>
<li><p>配置core-site.xml</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line">	&lt;property&gt;</div><div class="line">        &lt;name&gt;fs.defaultFS&lt;/name&gt;</div><div class="line">        &lt;value&gt;hdfs://192.168.120.128:9000&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<ul>
<li>配置hdfs-site.xml</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;dfs.replication&lt;/name&gt;</div><div class="line">        &lt;value&gt;1&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<ul>
<li>配置数据位置，默认是linux系统中的tmp文件夹但是会被系统删除<br>所以配置在另一个位置，在hadoop-2.7.2新建data<br>复制data位置信息到到配置的core-site.xml中<br><img src="./1479874318016.png" alt="Alt text"></li>
</ul>
<p><img src="./1479874278837.png" alt="Alt text"></p>
<p>####6.6.2.2、配置YARN</p>
<ul>
<li>配置mapred-site.xml<br>,先把模板改名字<br><img src="./1479874539411.png" alt="Alt text"></li>
</ul>
<p>指定mapreduce使用yarn（mapred-site.xml）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line"> &lt;property&gt;</div><div class="line">        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</div><div class="line">        &lt;value&gt;yarn&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<ul>
<li>配置yarn-site.xml</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</div><div class="line">        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<p><strong>这样我们的hadoop已经配置成功了</strong></p>
<p>###6.6.3、格式化(第一次启动时需要)</p>
<ul>
<li>第一次启动会需要格式化，回到hadoop主目录执行bin/hdfs<br><img src="./1479874922800.png" alt="Alt text"></li>
<li>格式化<br><img src="./1479875041409.png" alt="Alt text"></li>
<li>出现successful表示配置成功<br><img src="./1479875118214.png" alt="Alt text"><br>###6.6.4、启动测试</li>
<li>启动hadoop（在hadoop2…主目录下sbin/start-dfs.sh）<br><img src="./1479876710914.png" alt="Alt text"></li>
<li><p>启动yarn（sbin/start-yarn.sh）<br><img src="./1479877251538.png" alt="Alt text"></p>
</li>
<li><p>测试一下（自带的jar执行计算文件中的单词个数）<br>创立文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bin/hadoop fs  -mkdir -p /user/root/mr/wc/in</div></pre></td></tr></table></figure>
</li>
</ul>
<p>-查看该文件夹已然存在<br><img src="./1479883950387.png" alt="Alt text"><br>-上传一个文件，我上传的是linux的配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bin/hadoop fs -put /etc/profile /user/root/mr/wc/in</div></pre></td></tr></table></figure>
<ul>
<li>执行wordcount<br><img src="./1479884591585.png" alt="Alt text"></li>
<li>查看输出文件是否生成<br><img src="./1479884354772.png" alt="Alt text"><br>从图中看出我们的hadoop已然搭建成功，<br>不过最后还有一步，为了让hadoop命令能在整个linux下执行，我们还需配置一下hadoop的环境变量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/profile</div></pre></td></tr></table></figure>
<p>添加：</p>
<blockquote>
<p>export HADOOP_HOME=/usr/local/bigdata/software/hadoop-2.7.2/bin<br>export PATH=$PATH:$HADOOP_HOME<br>重置配置文件<br>执行hadoop<br><img src="./1479885204924.png" alt="Alt text"><br>这样hadoop就搭建好了</p>
</blockquote>
<p>##7、Hbase的环境搭建</p>
<p>###7.1、下载解压<br>从官网中下载hbase压缩文件，运行解压（注意文件目录，-C是大写）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[root@localhost tools]# tar -zxf hbase-1.2.4-bin.tar.gz -C ../software/</div></pre></td></tr></table></figure>
<p>###7.2、配置文件<br>进入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/bigdata/software/hbase-1.2.4/conf</div></pre></td></tr></table></figure>
<ul>
<li>配置java环境（hbase-env.sh）<br><img src="./1479886310315.png" alt="Alt text"></li>
<li>配置hbase在hdfs中的路径，文件(hbase-site.xml)先要在hbase主目录下创建data目录<br><img src="./1479887285515.png" alt="Alt text"></li>
<li>在regionservers输入linux的ip，该文件主要管理我们的regionsever的主机<br>-<img src="./1479887419826.png" alt="Alt text"><br>###7.3、启动测试</li>
<li>首先启动zookeeper</li>
<li>然后启动master</li>
<li>最后启动regionserver<br><img src="./1479887716843.png" alt="Alt text"><br>jps查看<br><img src="./1479887881615.png" alt="Alt text"><br>从主机浏览器打开linux端口16010（有的是60010）<br><img src="./1479888532310.png" alt="Alt text"><br>这样表示我们的hbase安装搭建成功了！<br><strong>完结撒花！！！</strong></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;HBase伪分布式搭建&quot;&gt;&lt;a href=&quot;#HBase伪分布式搭建&quot; class=&quot;headerlink&quot; title=&quot;HBase伪分布式搭建&quot;&gt;&lt;/a&gt;HBase伪分布式搭建&lt;/h1&gt;&lt;p&gt;@(csg)[bigdata, HBase, Hadoop,Linu
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2016/11/21/hello-world/"/>
    <id>http://yoursite.com/2016/11/21/hello-world/</id>
    <published>2016-11-21T01:54:02.976Z</published>
    <updated>2016-11-21T01:54:02.976Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
